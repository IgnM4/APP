{
  "version": "2.0.0",
  "inputs": [
    {
      "id": "sysPass",
      "type": "promptString",
      "description": "SYS password (solo para crear usuario APP_PYME)",
      "password": true
    }
  ],
  "tasks": [
    {
      "label": "DB: create app user (SYS)",
      "type": "shell",
      "command": "${config:db.sqlcl.path}",
      "args": [
        "-thin",
        "system/${input:sysPass}@//localhost:1521/XEPDB1",
        "@\"${workspaceFolder}\\ddl\\00_create_user.sql\""
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    },
    {
      "label": "DB: run_all (SQLcl)",
      "type": "shell",
      "command": "${config:db.sqlcl.path}",
      "args": [
        "-thin",
        "${config:db.connection}",
        "@\"run_all.sql\""
      ],
      "options": { "cwd": "${workspaceFolder}/scripts" },
      "problemMatcher": []
    },
    {
      "label": "DB: demo flow (compras→ventas)",
      "type": "shell",
      "command": "${config:db.sqlcl.path}",
      "args": [
        "-thin",
        "${config:db.connection}",
        "@\"demo_flow.sql\""
      ],
      "options": { "cwd": "${workspaceFolder}/scripts" },
      "problemMatcher": []
    },
    {
      "label": "DB: reset schema (drop→run_all)",
      "type": "shell",
      "command": "${config:db.sqlcl.path}",
      "args": [
        "-thin",
        "${config:db.connection}",
        "@\"reset_and_run.sql\""
      ],
      "options": { "cwd": "${workspaceFolder}/scripts" },
      "problemMatcher": []
    },
    {
      "label": "LB: status",
      "type": "shell",
      "command": "liquibase",
      "args": [
        "--defaultsFile=liquibase/liquibase.properties",
        "status"
      ],
      "options": { "cwd": "${workspaceFolder}" }
    },
    {
      "label": "LB: update",
      "type": "shell",
      "command": "liquibase",
      "args": [
        "--defaultsFile=liquibase/liquibase.properties",
        "update"
      ],
      "options": { "cwd": "${workspaceFolder}" }
    },
    {
      "label": "DB: check KPIs",
      "type": "shell",
      "command": "${config:db.sqlcl.path}",
      "args": [
        "-thin",
        "${config:db.connection}",
        "@\"${workspaceFolder}\\scripts\\check_kpis.sql\""
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    }
  ]
}
